<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>DHBW-Chat</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!--<link rel='stylesheet' type='text/css' media='screen' href='main.css'>-->
    <!--<script src='main.js'></script>-->
    <link rel="stylesheet" href="style.css"/>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <title>DHBW-Chat</title>
</head>
<body>
    <div class="join">
        <main class="join-main">
            <form action="chat.html" id="username-form">
                <div class="form-control">
                    <label for="username">Username</label>
                    <input
                        type="text"
                        name="username"
                        id="username"
                        placeholder="Usernamen hier eingeben"
                        required
                    />
                </div>
                <button type="submit" class="btn">Chat beitreten</button>
            </form>
        </main>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const usernameForm = document.getElementById('username-form');
        // User form commited -> (e) = event parameter
        usernameForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = e.target.elements.username.value;
            console.log("User " + username + " joined the chat!")
            socket.emit('username', username);
            username.value = '';
            window.location.assign("chat.html");
        });
    </script>
</body>
</html>